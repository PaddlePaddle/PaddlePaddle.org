<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div itemprop="articleBody">
<div class="section" id="api-doc-standard">
<span id="api-doc-standard"></span><h1>API Doc Standard<a class="headerlink" href="#api-doc-standard" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>[API Doc Structure](#API Doc Structure)</li>
<li>[Format and Examples](#Format and Examples)</li>
<li>[Complete Example](#Complete Example)</li>
</ul>
<div class="section" id="api-doc-structure">
<span id="api-doc-structure"></span><h2>API Doc Structure<a class="headerlink" href="#api-doc-structure" title="Permalink to this headline">¶</a></h2>
<p>API Doc should contain the following parts(please write them in order):</p>
<ul>
<li><p class="first">Python API Definition</p>
<p>The definition of API</p>
</li>
<li><p class="first">Function Description</p>
<p>Description of API’s function.
The description includes: meaning, purpose and operation on input of API, reference and corresponding link(if any), formula(if necessary) and explanations of key variables in the formula.</p>
</li>
<li><p class="first">Args Description</p>
<p>Description of API parameters.
Introduce parameters one by one according to the order in API definition.
The introduction includes: data type, default value(if any), meaning, etc.</p>
</li>
<li><p class="first">Returns</p>
<p>Introduction of API returned value.
Introduce meaning of returned value, provide correspoding format if necessary.
If returned value is a tuple containing multiple parameters, then introduce parameters one by one in order.</p>
</li>
<li><p class="first">Raises（if any）</p>
<p>Abnormality, error that may occur, and possible reasons. If there are more than one possible abnormity or error, they should be listed in order.</p>
</li>
<li><p class="first">Note（if any）</p>
<p>Matters needing attention. If there are more than one matters, they should be listed in order.</p>
</li>
<li><p class="first">Examples</p>
<p>Examples of how to use API.</p>
</li>
</ul>
</div>
<div class="section" id="format-and-examples">
<span id="format-and-examples"></span><h2>Format and Examples<a class="headerlink" href="#format-and-examples" title="Permalink to this headline">¶</a></h2>
<p>API documentation must obey reStructuredText format, please refer to <a class="reference external" href="http://sphinx-doc-zh.readthedocs.io/en/latest/rest.html">here</a>.
Format and examples of each part of API documantation are as follows: (take fc for example)</p>
<ul>
<li><p class="first">Python API Definition</p>
<ul>
<li><p class="first">Format</p>
<p>[Python API Definition]</p>
</li>
<li><p class="first">Example</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">fc</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span>
   <span class="n">size</span><span class="p">,</span>
   <span class="n">num_flatten_dims</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
   <span class="n">param_attr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
   <span class="n">bias_attr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
   <span class="n">act</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
   <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
   <span class="n">main_program</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
   <span class="n">startup_program</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Function Description</p>
<ul>
<li><p class="first">Format</p>
<p>This part contains (please write them in order):</p>
<p>[Function Description]</p>
<p>[Formula]</p>
<p>[Symbols’ Descriptions if necessary]</p>
<p>[References if necessary]</p>
</li>
<li><p class="first">Example</p>
<p>[Function Description]</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">**</span><span class="n">Fully</span> <span class="n">Connected</span> <span class="n">Layer</span><span class="o">**</span>

<span class="n">The</span> <span class="n">fully</span> <span class="n">connected</span> <span class="n">layer</span> <span class="n">can</span> <span class="n">take</span> <span class="n">multiple</span> <span class="n">tensors</span> <span class="k">as</span> <span class="n">its</span> <span class="n">inputs</span><span class="o">.</span> <span class="n">It</span>
<span class="n">creates</span> <span class="n">a</span> <span class="n">variable</span> <span class="n">called</span> <span class="n">weights</span> <span class="k">for</span> <span class="n">each</span> <span class="nb">input</span> <span class="n">tensor</span><span class="p">,</span> <span class="n">which</span> <span class="n">represents</span>
<span class="n">a</span> <span class="n">fully</span> <span class="n">connected</span> <span class="n">weight</span> <span class="n">matrix</span> <span class="kn">from</span> <span class="nn">each</span> <span class="nb">input</span> <span class="n">unit</span> <span class="n">to</span> <span class="n">each</span> <span class="n">output</span> <span class="n">unit</span><span class="o">.</span>
<span class="n">The</span> <span class="n">fully</span> <span class="n">connected</span> <span class="n">layer</span> <span class="n">multiplies</span> <span class="n">each</span> <span class="nb">input</span> <span class="n">tensor</span> <span class="k">with</span> <span class="n">its</span> <span class="n">coresponding</span>
<span class="n">weight</span> <span class="n">to</span> <span class="n">produce</span> <span class="n">an</span> <span class="n">output</span> <span class="n">Tensor</span><span class="o">.</span> <span class="n">If</span> <span class="n">multiple</span> <span class="nb">input</span> <span class="n">tensors</span> <span class="n">are</span> <span class="n">given</span><span class="p">,</span>
<span class="n">the</span> <span class="n">results</span> <span class="n">of</span> <span class="n">multiple</span> <span class="n">multiplications</span> <span class="n">will</span> <span class="n">be</span> <span class="n">sumed</span> <span class="n">up</span><span class="o">.</span> <span class="n">If</span> <span class="n">bias_attr</span> <span class="ow">is</span>
<span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="n">a</span> <span class="n">bias</span> <span class="n">variable</span> <span class="n">will</span> <span class="n">be</span> <span class="n">created</span> <span class="ow">and</span> <span class="n">added</span> <span class="n">to</span> <span class="n">the</span> <span class="n">output</span><span class="o">.</span> <span class="n">Finally</span><span class="p">,</span>
<span class="k">if</span> <span class="n">activation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">applied</span> <span class="n">to</span> <span class="n">the</span> <span class="n">output</span> <span class="k">as</span> <span class="n">well</span><span class="o">.</span>
</pre></div>
</div>
<p>[Formula]</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">This</span> <span class="n">process</span> <span class="n">can</span> <span class="n">be</span> <span class="n">formulated</span> <span class="k">as</span> <span class="n">follows</span><span class="p">:</span>

<span class="o">..</span> <span class="n">math</span><span class="p">::</span>

     <span class="n">Out</span> <span class="o">=</span> <span class="n">Act</span><span class="p">({</span>\<span class="n">sum_</span><span class="p">{</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">}</span><span class="o">^</span><span class="p">{</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">}</span><span class="n">X_iW_i</span> <span class="o">+</span> <span class="n">b</span><span class="p">})</span>
</pre></div>
</div>
<p>[Symbols’ Descriptions if necessary]</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>In the above equation:

* :math:`N`: Number of the input.
* :math:`X_i`: The input tensor.
* :math:`W`: The weights created by this layer.
* :math:`b`: The bias parameter created by this layer (if needed).
* :math:`Act`: The activation function.
* :math:`Out`: The output tensor.
</pre></div>
</div>
<p>[References if necessary]</p>
<p>Since there is no need for reference of fc, we omit them here. Under other circumstances, please provide explicit reference and link, take layer_norm for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>Refer to `Layer Normalization &lt;https://arxiv.org/pdf/1607.06450v1.pdf&gt;`_ for more details.
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
<ul>
<li><p class="first">Args Description</p>
<ul>
<li><p class="first">Format</p>
<p>[Arg’s Name][(Data Type, Default Value)][Description]</p>
</li>
<li><p class="first">Example</p>
<p>part of fc parameters are as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Args</span><span class="p">:</span>
    <span class="nb">input</span> <span class="p">(</span><span class="n">Variable</span><span class="o">|</span><span class="nb">list</span> <span class="n">of</span> <span class="n">Variable</span><span class="p">):</span> <span class="n">The</span> <span class="nb">input</span> <span class="n">tensor</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">of</span> <span class="n">this</span> <span class="n">layer</span><span class="p">,</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">dimension</span> <span class="n">of</span>
        <span class="n">the</span> <span class="nb">input</span> <span class="n">tensor</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="ow">is</span> <span class="n">at</span> <span class="n">least</span> <span class="mf">2.</span>
    <span class="n">param_attr</span> <span class="p">(</span><span class="n">ParamAttr</span><span class="o">|</span><span class="nb">list</span> <span class="n">of</span> <span class="n">ParamAttr</span><span class="p">,</span> <span class="n">default</span> <span class="kc">None</span><span class="p">):</span> <span class="n">The</span> <span class="n">parameter</span> <span class="n">attribute</span> <span class="k">for</span> <span class="n">learnable</span>
        <span class="n">parameters</span><span class="o">/</span><span class="n">weights</span> <span class="n">of</span> <span class="n">this</span> <span class="n">layer</span><span class="o">.</span>
    <span class="n">name</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span> <span class="kc">None</span><span class="p">):</span> <span class="n">The</span> <span class="n">name</span> <span class="n">of</span> <span class="n">this</span> <span class="n">layer</span><span class="o">.</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Returns</p>
<ul>
<li><p class="first">Format</p>
<p>[Name][Shape]</p>
</li>
<li><p class="first">Example</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Returns</span><span class="p">:</span>
    <span class="n">A</span> <span class="n">tensor</span> <span class="n">variable</span> <span class="n">storing</span> <span class="n">the</span> <span class="n">transformation</span> <span class="n">result</span><span class="o">.</span>
</pre></div>
</div>
<p>when returned value contain more than one tuple, please introduce every parameter in order, take dynamic_lstm for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Returns</span><span class="p">:</span>
    <span class="n">A</span> <span class="nb">tuple</span> <span class="n">containing</span><span class="p">:</span>
      <span class="n">The</span> <span class="n">hidden</span> <span class="n">state</span> <span class="n">of</span> <span class="n">LSTM</span> <span class="n">whose</span> <span class="n">shape</span> <span class="ow">is</span> <span class="p">(</span><span class="n">T</span> <span class="n">X</span> <span class="n">D</span><span class="p">)</span><span class="o">.</span>
      <span class="n">The</span> <span class="n">cell</span> <span class="n">state</span> <span class="n">of</span> <span class="n">LSTM</span> <span class="n">whose</span> <span class="n">shape</span> <span class="ow">is</span> <span class="p">(</span><span class="n">T</span> <span class="n">X</span> <span class="n">D</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Raises</p>
<ul>
<li><p class="first">Format</p>
<p>[Exception Type][Condition]</p>
</li>
<li><p class="first">Example</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Raises</span><span class="p">:</span>
    <span class="ne">ValueError</span><span class="p">:</span> <span class="n">If</span> <span class="n">the</span> <span class="n">rank</span> <span class="n">of</span> <span class="n">the</span> <span class="nb">input</span> <span class="ow">is</span> <span class="n">less</span> <span class="n">than</span> <span class="mf">2.</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Note</p>
<ul>
<li><p class="first">Format</p>
<p>[Note]</p>
</li>
<li><p class="first">Example</p>
<p>there is no Note in fc, so we omit this part. If there is any note, please write clearly. If there are more than one notes, please list them in order. Take scaled_dot_product_attention for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Note</span><span class="p">:</span>
    <span class="mf">1.</span> <span class="n">When</span> <span class="n">num_heads</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="n">three</span> <span class="n">linear</span> <span class="n">projections</span> <span class="n">are</span> <span class="n">learned</span> <span class="n">respectively</span>
       <span class="n">to</span> <span class="nb">map</span> <span class="nb">input</span> <span class="n">queries</span><span class="p">,</span> <span class="n">keys</span> <span class="ow">and</span> <span class="n">values</span> <span class="n">into</span> <span class="n">queries</span><span class="s1">', keys'</span> <span class="ow">and</span> <span class="n">values</span><span class="s1">'.</span>
       <span class="n">queries</span><span class="s1">', keys'</span> <span class="ow">and</span> <span class="n">values</span><span class="s1">' have the same shapes with queries, keys</span>
       <span class="ow">and</span> <span class="n">values</span><span class="o">.</span>
    <span class="mf">2.</span> <span class="n">When</span> <span class="n">num_heads</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="n">scaled_dot_product_attention</span> <span class="n">has</span> <span class="n">no</span> <span class="n">learnable</span>
       <span class="n">parameters</span><span class="o">.</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Examples</p>
<ul>
<li><p class="first">Format</p>
<p>[Python Code Snipper]</p>
</li>
<li><p class="first">Example</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Examples</span><span class="p">:</span>
    <span class="o">..</span> <span class="n">code</span><span class="o">-</span><span class="n">block</span><span class="p">::</span> <span class="n">python</span>

      <span class="n">data</span> <span class="o">=</span> <span class="n">fluid</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"data"</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"float32"</span><span class="p">)</span>
      <span class="n">fc</span> <span class="o">=</span> <span class="n">fluid</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">fc</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">act</span><span class="o">=</span><span class="s2">"tanh"</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="complete-example">
<span id="complete-example"></span><h2>Complete Example<a class="headerlink" href="#complete-example" title="Permalink to this headline">¶</a></h2>
<p>Complete Example of fc please see <a class="reference external" href="dev/src/fc.py">here</a>。</p>
</div>
</div>
</div>
<div class="articleComments">
</div>
</div>