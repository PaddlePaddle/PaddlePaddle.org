{% verbatim %}
<p>A demo to show converting caffe models trained on 'imagenet' using caffe2fluid</p>
<hr/>
<h1>How to use</h1>
<ol>
<li>
<p>Prepare python environment</p>
</li>
<li>
<p>Download caffe model to "models.caffe/xxx" which contains "xxx.caffemodel" and "xxx.prototxt"</p>
</li>
<li>
<p>Convert the Caffe model to Fluid model</p>
<ul>
<li>
<p>generate fluid code and weight file
    <code>python convert.py alexnet.prototxt \
    --caffemodel alexnet.caffemodel \
    --data-output-path alexnet.npy \
    --code-output-path alexnet.py</code></p>
</li>
<li>
<p>save weights as fluid model file
    </p><div class="highlight"><pre><span></span>python alexnet.py alexnet.npy ./fluid
</pre></div>
</li>
</ul>
</li>
<li>
<p>Do inference
    </p><div class="highlight"><pre><span></span>python infer.py infer ./fluid data/65.jpeg
</pre></div>
</li>
<li>
<p>convert model and do inference together
   <code>bash ./tools/run.sh alexnet ./models.caffe/alexnet ./models/alexnet</code></p>
<ul>
<li>Assume the Caffe model is stored in '<em>./models.caffe/alexnet/alexnet.prototxt|caffemodel</em>'</li>
<li>converted model will be stored as '<em>./models/alexnet/alexnet.py|npy</em>'</li>
</ul>
</li>
<li>
<p>test the difference with caffe's results(need pycaffe installed)
   <code>bash ./tools/diff.sh resnet</code></p>
<ul>
<li>Make sure your caffemodel stored in '<em>./models.caffe/resnet</em>'</li>
<li>The results will be stored in '<em>./results/resnet.paddle|caffe</em>'</li>
</ul>
</li>
</ol>
{% endverbatim %}